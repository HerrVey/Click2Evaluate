<ion-header>
  <ion-navbar>
    <ion-title>
      Click2Evaluate
    </ion-title>
    <ion-buttons end>
      <button ion-button icon-left (click)='refresh_data()' end>
        <ion-icon name="refresh"></ion-icon>
      </button>
      <button ion-button icon-left (click)='disconnect()' end>
        <ion-icon name="log-out"></ion-icon>
      </button>
    </ion-buttons>

  </ion-navbar>
</ion-header>

<ion-content padding>
  <div *ngIf="studentsData.connected">
  <h2> Quels modules souhaitez-vous évaluer ? </h2>
  <ion-list>
      <div *ngFor='let course of studentsData.courses'>

        <!--
        * Disponible (ni trop tot ni trop tard)
          * Répondu
          * Non répondu

        * Non Disponible
          * Trop tot :
          * Trop tard :
            * Répondu :
            * Non répondu :
          -->
        <div *ngIf='available(course)'>
          <ion-item-sliding *ngIf='!course.answered'>
            <ion-item>
              {{course.label}}
            </ion-item>
            <ion-item-options side='right' (ionSwipe)='openSurvey(course)'>
              <button ion-button icon-only (click)='openSurvey(course)'>
                <ion-icon name='create'></ion-icon>
              </button>
            </ion-item-options>
          </ion-item-sliding>

          <ion-item-sliding *ngIf='course.answered'>
            <ion-item>
              <ion-icon name="checkmark"></ion-icon> {{course.label}}
            </ion-item>
            <ion-item-options side='right'>
              Questionnaire déjà envoyé
            </ion-item-options>
          </ion-item-sliding>
        </div>


        <!-- courses unavailable (to soon) -->
        <div *ngIf='toSoon(course)'>
            <ion-item-sliding *ngIf='!available(course)'>
              <ion-item>
                {{ course.label }}
              </ion-item>
              <ion-item-options side='right'>
                Trop tôt, revenir le :  <ion-datetime displayFormat="DD/MM/YYYY" [(ngModel)]="course.availableDate"></ion-datetime>
              </ion-item-options>
            </ion-item-sliding>
        </div>

        <div *ngIf='toLate(course)'>
          <ion-item-sliding *ngIf='!course.answered'>
            <ion-item>
              {{course.label}}
            </ion-item>
            <ion-item-options side='right'>
              Trop tard. La date limite était le : 
              <ion-datetime displayFormat="DD/MM/YYYY" [(ngModel)]="course.commissionsDate"></ion-datetime>
            </ion-item-options>
          </ion-item-sliding>

          <ion-item-sliding *ngIf='course.answered'>
            <ion-item>
              <ion-icon name="checkmark"></ion-icon> {{course.label}}
            </ion-item>
            <ion-item-options side='right'>
              Vous avez répondu dans les temps. La date limite était le :
              <ion-datetime displayFormat="DD/MM/YYYY" [(ngModel)]="course.commissionsDate"></ion-datetime>
            </ion-item-options>
          </ion-item-sliding>
        </div>

      </div>

  </ion-list>

</div>
<div *ngIf="!studentsData. connected">
  <h2> Aucun cours à afficher, vous n'êtes pas connecté. </h2>
</div>
</ion-content>
